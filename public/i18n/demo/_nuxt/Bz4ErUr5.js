import k from"./BQNcTxaL.js";import P from"./DKM8T3w2.js";import b from"./CrogshVP.js";import{f,i as L,P as g,j as R,k as x,l as C,r as B,m as S,n as m,q as j,s as E,v as T,x as u,h as p,y as A,z as N,S as D,T as H,A as O,L as w,B as $,D as q,c as F,b as y,w as _,o as d,F as v}from"./nrRp7zWi.js";import{u as z}from"./DpYRlvni.js";import"./BTF5PAsv.js";const I=f({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(t,a){const e=await m[t.name]().then(o=>o.default||o);return()=>p(e,t.layoutProps,a.slots)}}),M=f({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,a){const e=T(),o=L(g),s=o===R()?x():o,r=C(()=>{let n=u(t.name)??s.meta.layout??"default";return n&&!(n in m)&&t.fallback&&(n=u(t.fallback)),n}),l=B();a.expose({layoutRef:l});const i=e.deferHydration();if(e.isHydrating){const n=e.hooks.hookOnce("app:error",i);S().beforeEach(n)}return()=>{const n=r.value&&r.value in m,c=s.meta.layoutTransition??j;return E(H,n&&c,{default:()=>p(D,{suspensible:!0,onResolve:()=>{N(i)}},{default:()=>p(V,{layoutProps:A(a.attrs,{ref:l}),key:r.value||void 0,name:r.value,shouldProvide:!t.name,hasTransition:!!c},a.slots)})}).default()}}}),V=f({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,a){const e=t.name;return t.shouldProvide&&O(w,{isCurrent:o=>e===(o.meta.layout??"default")}),()=>{var o,s;return!e||typeof e=="string"&&!(e in m)?(s=(o=a.slots).default)==null?void 0:s.call(o):p(I,{key:e,layoutProps:t.layoutProps,name:e},a.slots)}}}),G={class:"document-driven-page"},Z=f({__name:"document-driven",setup(t){const{contentHead:a}=$().public.content,{page:e,layout:o}=q();return e.value,a&&z(e),(s,r)=>{const l=k,i=P,n=b,c=M;return d(),F("div",G,[y(c,{name:u(o)||"default"},{default:_(()=>[u(e)?(d(),v(i,{key:u(e)._id,value:u(e)},{empty:_(({value:h})=>[y(l,{value:h},null,8,["value"])]),_:1},8,["value"])):(d(),v(n,{key:1}))]),_:1},8,["name"])])}}});export{Z as default};
